<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>

    <button onclick="fight()">Deepwoods encounter</button>

    <script type="text/javascript">

function Hero (name, level, health) {
  this.name = name;
  this.level = level;
  this.health = health;
}

function Warrior (name, level, health, weapon) {
  Hero.call(this, name, level, health);
  this.weapon = weapon
}

function Healer (name, level, health, spell) {
  Hero.call(this, name, level, health);
  this.spell = spell;
}

function Monster (name, level, health, ruotti) {
  Hero.call(this, name, level, health);
  this.kieli = ["speaking swedish", "mora"];
  this.ruotti = ruotti;
  this.attack = function (target1, target2, kumpiase) {
    switch(kumpiase){
      case "speaking swedish":
        console.log(`${this.name} utters demonic incantation at ${target1.name} and ${target2.name} saying ${this.ruotti}.`);
        target1.health = target1.health-40;
        target2.health = target2.health-40;
        console.log(`${target1.name} has ${target1.health} health left and ${target2.name} has ${target2.health} health left.`);
      break;
      case "mora":
        var target = Math.random();
          // var target = prompt();
          if(target < "0.5") {target = target1;}
          else {target = target2};
        console.log(`${this.name} whips out the mora and swings at ${target.name}.`);
        target.health = target.health-50;
        console.log(`${target.name} has ${target.health} health left.`);
      }
  }
}

Warrior.prototype = Object.create(Hero.prototype);
Healer.prototype = Object.create(Hero.prototype);
Monster.prototype = Object.create(Hero.prototype);

Hero.prototype.greet = function() {
  console.log(this.name + " says Hello World!")
}

var playerWarrior = new Warrior ("Pentti the Brave", 2, 100, "Axe");
var playerHealer = new Healer ("Pertti the Wise", 3, 80, "Cure");
var playerMonster = new Monster ("Håkan the Hårrible", 5, 200, "köttbullarna var läckra");

Warrior.prototype.attack = function (target) {
  console.log(`${this.name} attacks ${target.name} with the ${this.weapon}.`);
  target.health = target.health-30;
  console.log(`${target.name} has ${target.health} health left.`);
}

Healer.prototype.cast = function (target) {
  console.log(`${this.name} heals ${target.name} with the ${this.spell}.`);
  target.health = target.health+15;
  console.log(`${target.name} has ${target.health} health left.`);
}

function fight()  {

  var MonsterAttack = Math.floor(Math.random() *100)
    if (MonsterAttack < "50") {MonsterAttack = "speaking swedish";}
    else {MonsterAttack = "mora";}
  playerMonster.attack(playerWarrior, playerHealer, MonsterAttack);
  playerWarrior.attack(playerMonster);
  playerHealer.cast(playerWarrior);
}
    </script>

  </body>
</html>
